<!DOCTYPE html>
<html>

<head>
    <title>Fetch</title>
</head>

<body>
    <!-- polyfills -->
    <script src="../node_modules/romagny13-ts-promise/dist/ts-promise.min.js"></script>
    <script src="../node_modules/whatwg-fetch/fetch.js"></script>

    <!-- fetch demo -->
    <script src="../dist/post.service.js"></script>
    <script>
        /*  if (supportFetch()) {
              // do code
          }
          else {
              console.log('fetch not supported => XMLHttpRequest?')
          }*/

        // or with polyfill
        window.Promise = window.Promise || TSPromise;

        var postService = new PostService();

        // GET
        postService.getPost(1).then(function (post) {
            console.log('get post', post);
        }, function (error) {
            console.log('error', error);
        });

        // POST
        postService.addPost({
            userId: 1,
            title: 'My title',
            body: 'My content'
        }).then(function (post) {
            console.log('post added', post);
        }, function (error) {
            console.log('error', error);
        });

        // PUT
        postService.updatePost(1, {
            id: 1,
            userId: 1,
            title: 'My new title',
            body: 'My new content'
        }).then(function (post) {
            console.log('post updated', post);
        }, function (error) {
            console.log('error', error);
        });

        // DELETE
        postService.deletePost(1).then(function (post) {
            console.log('post deleted');
        }, function (error) {
            console.log('error', error);
        });
    </script>
</body>

</html>